/* ==========================================
   FIX GLOBAL DÉMÉSUD - À AJOUTER PARTOUT
   1. Scroll fluide et rapide (mobile)
   2. Gradients hero éclaircis
   3. Fond burger blanc
========================================== */

/* ==========================================
   1. FIX SCROLL MOBILE - UNIVERSEL
   Empêche les blocages de scroll
========================================== */

@media (max-width: 768px) {

    /* HTML et Body - scroll toujours activé */
    html,
    body {
        overflow-x: hidden !important;
        overflow-y: auto !important;
        -webkit-overflow-scrolling: touch !important;
        height: auto !important;
        min-height: 100vh !important;
        position: relative !important;
    }

    /* Empêcher position fixed de bloquer */
    body.menu-open {
        overflow: hidden !important;
    }

    body:not(.menu-open) {
        overflow-y: auto !important;
    }

    /* Container fluide */
    .container {
        max-width: 100% !important;
        overflow-x: hidden !important;
        overflow-y: visible !important;
    }

    /* Sections - jamais de overflow hidden */
    section {
        overflow-x: hidden !important;
        overflow-y: visible !important;
    }

    /* Hero sections - scroll libre */
    .hero-luxury,
    .page-hero {
        overflow: visible !important;
        position: relative !important;
    }

    /* Carousels - pas de blocage */
    .carousel-container,
    .carousel-wrapper {
        overflow: visible !important;
    }

    /* Grids - jamais bloqués */
    .services-deck,
    .services-grid,
    .locations-grid,
    .stats-grid,
    .security-grid {
        overflow: visible !important;
    }
}

/* ==========================================
   2. SCROLL SMOOTH UNIVERSEL
   Rend le scroll plus fluide et rapide
========================================== */

html {
    scroll-behavior: smooth !important;
    scroll-padding-top: 80px !important;
}

/* Améliorer le scroll momentum sur iOS */
* {
    -webkit-overflow-scrolling: touch !important;
}

/* Snap scroll DÉSACTIVÉ (cause des sauts) */
.carousel-container {
    scroll-snap-type: none !important;
}

.review-card {
    scroll-snap-align: none !important;
}

/* ==========================================
   3. GRADIENTS HERO ÉCLAIRCIS (MOBILE)
   Rendre les images hero plus visibles
========================================== */

@media (max-width: 768px) {

    /* Gradient INDEX (hero-luxury) */
    .hero-luxury .hero-gradient {
        background: linear-gradient(to bottom,
                rgba(0, 61, 122, 0.40) 0%,
                rgba(0, 81, 168, 0.50) 50%,
                rgba(0, 61, 122, 0.65) 100%) !important;
    }

    /* Gradients PAGES (page-hero) */
    .page-hero .hero-gradient {
        background: linear-gradient(to bottom,
                rgba(0, 61, 122, 0.45) 0%,
                rgba(0, 81, 168, 0.55) 50%,
                rgba(0, 61, 122, 0.70) 100%) !important;
    }

    /* Pattern désactivé sur mobile */
    .hero-pattern {
        display: none !important;
    }
}

/* ==========================================
   4. FOND BURGER BLANC
   Menu mobile avec fond blanc
========================================== */

@media (max-width: 768px) {

    /* Navigation mobile - FOND BLANC */
    .main-nav,
    .nav-menu,
    .mobile-menu {
        background: var(--color-white) !important;
        background-color: #ffffff !important;
    }

    /* Liens - couleur adaptée au fond blanc */
    .main-nav .nav-links a,
    .nav-menu .nav-links a,
    .mobile-menu .nav-links a {
        color: var(--color-primary) !important;
    }

    /* Hover sur fond blanc */
    .main-nav .nav-links a:hover,
    .nav-menu .nav-links a:hover,
    .mobile-menu .nav-links a:hover {
        background: var(--color-cream) !important;
        color: var(--color-orange) !important;
    }

    /* Active link */
    .main-nav .nav-links a.active,
    .nav-menu .nav-links a.active,
    .mobile-menu .nav-links a.active {
        background: var(--color-primary-light) !important;
        color: var(--color-primary) !important;
        font-weight: 700 !important;
    }

    /* Bordures entre liens */
    .main-nav .nav-links li,
    .nav-menu .nav-links li,
    .mobile-menu .nav-links li {
        border-bottom: 1px solid var(--color-gray-light) !important;
    }
}

/* ==========================================
   5. DÉSACTIVER LES ANIMATIONS QUI BLOQUENT
========================================== */

@media (max-width: 768px) {

    /* Parallax désactivé mobile */
    .hero-bg {
        background-attachment: scroll !important;
        transform: none !important;
    }

    /* Pas d'animations qui retardent */
    .hero-wrapper,
    .hero-content,
    .hero-title,
    .hero-subtitle {
        animation: none !important;
        animation-delay: 0s !important;
    }

    /* Stats visibles immédiatement */
    .stat-number,
    .stat-value {
        animation: none !important;
    }
}

/* ==========================================
   6. PERFORMANCE - DÉSACTIVER TRANSITIONS LOURDES
========================================== */

@media (max-width: 768px) {

    /* Réduire les transitions lourdes */
    .service-card:hover,
    .location-card:hover,
    .review-card:hover {
        transform: none !important;
    }

    /* Images - pas de zoom sur mobile */
    .service-visual img,
    .site-visual img,
    .security-image img {
        transition: none !important;
    }

    .service-card:hover .service-visual img,
    .site-card:hover .site-visual img {
        transform: none !important;
    }
}

/* ==========================================
   7. CORRECTION CAROUSEL MOBILE
========================================== */

@media (max-width: 768px) {

    /* Carousel en mode COLONNE simple */
    .carousel-track {
        display: flex !important;
        flex-direction: column !important;
        gap: 20px !important;
        transform: none !important;
        transition: none !important;
    }

    /* Cartes 100% largeur */
    .review-card {
        width: 100% !important;
        margin-right: 0 !important;
        flex: none !important;
    }

    /* Contrôles cachés */
    .carousel-nav,
    .carousel-dots {
        display: none !important;
    }
}

/* ==========================================
   8. TOUCH ACTIONS OPTIMISÉES
========================================== */

/* Améliorer la réactivité tactile */
a,
button,
.btn,
.card,
.nav-links a {
    touch-action: manipulation !important;
}

/* Désactiver le zoom sur double-tap */
button,
input,
select,
textarea {
    touch-action: manipulation !important;
}

/* ==========================================
   9. CONTENEURS - JAMAIS BLOQUÉS
========================================== */

@media (max-width: 768px) {

    /* Toutes les sections DOIVENT scroller */
    .intro-section,
    .services-luxury,
    .services-section,
    .services-detailed,
    .about-luxury,
    .testimonials-luxury,
    .locations-luxury,
    .sites-section,
    .solutions-section,
    .security-section,
    .process-section,
    .guarantees-section,
    .advantages-section,
    .certifications-section,
    .zone-section,
    .story-section,
    .expansion-section,
    .stats-section,
    .contact-methods,
    .contact-main,
    .map-agencies-section,
    .cta-section,
    .cta-luxury {
        overflow: visible !important;
        height: auto !important;
        min-height: auto !important;
    }
}

/* ==========================================
   10. SUPPRESSION CONFLITS POSITION FIXED
========================================== */

@media (max-width: 768px) {

    /* Éléments qui ne doivent PAS être fixed sur mobile */
    .hero-wrapper,
    .hero-content,
    .stats-luxury {
        position: relative !important;
    }

    /* Header reste fixed mais pas le contenu */
    body>*:not(.main-header) {
        position: relative !important;
    }
}

/* ==========================================
   11. HAUTEURS AUTOMATIQUES PARTOUT
========================================== */

@media (max-width: 768px) {

    /* Toutes les sections en hauteur auto */
    section,
    .section,
    div[class*="section"] {
        height: auto !important;
        min-height: auto !important;
    }

    /* Hero en hauteur auto */
    .hero-luxury,
    .page-hero {
        height: auto !important;
        min-height: auto !important;
    }
}

/* ==========================================
   12. AMÉLIORATION PERFORMANCE SCROLL
========================================== */

/* GPU acceleration pour le scroll */
body {
    transform: translateZ(0);
    backface-visibility: hidden;
    perspective: 1000px;
}

/* Optimiser le rendu des images */
img {
    will-change: auto;
}

/* ==========================================
   13. FIX SPÉCIFIQUE GARDE-MEUBLES
========================================== */

@media (max-width: 768px) {

    /* Page garde-meubles - scroll libre */
    body.page-gardemeubles {
        overflow-y: auto !important;
    }

    /* Sections garde-meubles */
    .sites-section,
    .solutions-section,
    .security-section {
        overflow: visible !important;
        height: auto !important;
    }

    /* Grids garde-meubles */
    .sites-grid,
    .solutions-grid,
    .security-grid {
        overflow: visible !important;
    }
}

/* ==========================================
   14. ENLEVER TAP HIGHLIGHT PARTOUT
========================================== */

* {
    -webkit-tap-highlight-color: transparent !important;
    -webkit-touch-callout: none !important;
}

/* ==========================================
   15. DEBUG - À RETIRER EN PRODUCTION
========================================== */

/* Uncomment pour debug scroll issues
@media (max-width: 768px) {
    * {
        outline: 1px solid red !important;
    }
    
    *[style*="overflow: hidden"] {
        outline: 3px solid blue !important;
    }
}
*/